language: java
jdk:
- openjdk8
branches:
  except:
  - "/master-v0\\.1.*/"
script:
- chmod +x ./travis.sh
- "./travis.sh"
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=$TRAVIS_BRANCH-v0.1.$TRAVIS_BUILD_NUMBER
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker --tags
deploy:
  provider: releases
  api_key: "$GITHUB_TOKEN"
  file: target/jwt-cracker-0.0.1-SNAPSHOT.jar
  skip_cleanup: true
  on:
    tags: false
    branch: master
after_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git checkout $TRAVIS_BRANCH
- git add docs/apidocs/* && git status
- git commit -m "[skip ci] adding javadocs travis build:$TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker $TRAVIS_BRANCH
addons:
  sonarcloud:
    organization: hemantsonu20-github
    token:
      secure: "$SONAR_TOKEN"
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
notifications:
  email:
    recipients:
    - hemantsonu20@gmail.com
    on_success: change
    on_failure: always
env:
  global:
  # GITHUB_TOKEN
  - secure: "a7/D5INjNhYuyPQBSAc2SZpmMt2NmI5aCmD2D/wUkKDaCHoObRunoPxgPYsdTrX+BV4smHDkqO5CMokN3GyeDSoR+k2vrfn4ZkyydppKbAAnuzPyJ18WfrCGqPua0qluU59YdPdJJXmSpA+MzJG+7R8ItDq3m34wJ7lJDwMc7HNA8aFqfb4BX7MjzvF0IeQVLDLmIxZyD5QIIXMTITYCoK46m07YdkytaLNyMNd/iJA5LjgBFpGHmRHRhA02Knt0Y6BRfIal3A9Ww8ltamh8rsRwKbh+TXer7+N7Qpa00bAGSWqUnFGKIB9eAR2JiIWF/T6kqGhJ0VwxwvBpJFtYVDrrO7g2PsRjLbyUj+YaRngwKBLavFzEvpxQ7b6KTpoBB8pTBolB2tG0w5BMwZAfEkWGZJcU2/KqNIoFjidfCUaT+kF1CwUWVNH/clJUHwhzAhrWEx6ymkCrf4g0S8Jiy23cnKmVfAVZjw3JALypjMyXqJ1wQ5yWwtSS9S1mjvqXJKe26iRbBLHmTY5z6KD0+1AHFoaZLxGe5nTK9g9tk4YX4t5Px6gXGyrafiv6PBQab1MGRQz9a2++xHaINgEZNC/wtoVO3YXbnt+mSoWIM54ks+XkQ/L25LYrcBL7qkDX6+BJ2wEy1/pQX3QlQXAApX/Ni4ufN3LQ6nkwjHXLUZg=" 
  # SONAR_TOKEN
  - secure: "blerIMOnhBgv6a7sdgDXAHhoHJ1RUtgJl0vkS7hquypdTiSsRCKpt0kV5fRCC9EvW766MDYiheY7tzoXqQIPwya1QLcZz4MXrdFANDR3OhyrVkBBZSm9Fjc7UmIjTY6wGpBs/oZDbLiZ6hhN8iaIJke0FjWu5OSzPu2tS0Gspi+eYNgUAYi4f2VELRCOSofvrDJgLF2D3YsFj2Yh8fMx5rUZLchotUUmqZ6R6eJ2fY0lcHLy597XDaMiWUMkysUFuYyO5hE0IiZQan6ZNLm6FHyCUu3e0mXSPyniXlLlXXkCNFECL/DGj4/gQiZaRtd9XXFhsXtxuxIiyauRlOf2YisFElCKWuBadOnaI0d+W0gkgvfSXCkDTZEtOvkm1frJWixPLW69Cxph85bFK53oBwlFenUceTTxT7jNuwsshv5lwyk/NhLSqCJknYn+X1F9LQn/PfAGOYzAVoeXRgOzTUASprOLs9O6Op0w2jmobsJOZIM8K8OO/tkVBEMfa0zzhjRu9My5KpZkJRbChkiUCOFGB0YgK/21+SUqZcWgOrQWCet9kxuTX7Ra4p1LzOTi44ICm5XgAxOb87kGqm0nZHs5TaQu6/gvrknfSvoMJw0NlkVKl8jRzp+IP0efXvCy/Mx9BPzV+LD4kD+9Z6Nsh5YnvQK+ZNgm4xiQPhxbgmE="
