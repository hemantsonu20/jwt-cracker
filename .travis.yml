language: java
jdk:
- openjdk8
branches:
  except:
  - "/master-v0\\.1.*/"
script:
- chmod +x ./travis.sh
- "./travis.sh"
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=$TRAVIS_BRANCH-v0.1.$TRAVIS_BUILD_NUMBER
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker --tags
deploy:
  provider: releases
  api_key: "$GITHUB_TOKEN"
  file: target/jwt-cracker-0.0.1-SNAPSHOT.jar
  skip_cleanup: true
  on:
    tags: false
    branch: master
after_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git checkout $TRAVIS_BRANCH
- git add docs/apidocs/* && git status
- git commit -m "[skip ci] adding javadocs travis build:$TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker $TRAVIS_BRANCH
addons:
  sonarcloud:
    organization: hemantsonu20-github
    token:
      secure: "$SONAR_TOKEN"
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
notifications:
  email:
    recipients:
    - hemantsonu20@gmail.com
    on_success: change
    on_failure: always
env:
  global:
  # GITHUB_TOKEN
  - secure: dAHl4btq5xmta2uMlPVj4Qq+WdQYn85kQj4wksPRluUofMkvJ3djPCx+UYfjvfX6iZ02zdw/Jsf3kWYTi9P/0Grl/gn/dN956ZQ8g4bAHRJ2/gOIv+rFG/1omc0VEOx0Hy3MnXqzmTYOMdJMGmDDLB8g0e2ytGlTlIIM/BFXnjPPmoOCC/tmzieQvVf1BOFw3DrySVVqmEsAcPicJwXxrszOu3TqbE7Z8X3o4RrgWHo8nLhV+kWr/ESe2dmsPq7GaS8i9KAl3fbtyXJ+PUHjaACerkML4j1Ub+8XRUAIOA1r4I5iraHK9uXCW3hXA+C3yVndXeg5rd7FDtn3bL6U1/hTy0TGoXvh20F1bAcVEOM2ZJBY6DV/D3JCPNmCoW16K6pfrXVYVahu3viOUX1ri4Ih2IRENMkZYNtGLiwcYpYEQk4HmrUxjW9ZiTuBJegz+UjID2d9jc44/ij/foovWCiUNnnp4HD0YePgahsMYlgS4k49i+tNcwbOp/r4yhBq242Fjudd3oNLB3/VwN7WG8F5t5FCVQODkxRpIDZBYgHGubT4sM5goFSfkNYRsSaVYXqFNpvlGTAq5/J16MPTOss2nAjhGjE7NJWEoPOTv3KTuWm5BlGyKyHfXKiTRN9g2J/teA+RGjqtlGT/16cyiHsRboJ3W4KLl5GFh7vB1Cw=
  # SONAR_TOKEN
  - secure: blerIMOnhBgv6a7sdgDXAHhoHJ1RUtgJl0vkS7hquypdTiSsRCKpt0kV5fRCC9EvW766MDYiheY7tzoXqQIPwya1QLcZz4MXrdFANDR3OhyrVkBBZSm9Fjc7UmIjTY6wGpBs/oZDbLiZ6hhN8iaIJke0FjWu5OSzPu2tS0Gspi+eYNgUAYi4f2VELRCOSofvrDJgLF2D3YsFj2Yh8fMx5rUZLchotUUmqZ6R6eJ2fY0lcHLy597XDaMiWUMkysUFuYyO5hE0IiZQan6ZNLm6FHyCUu3e0mXSPyniXlLlXXkCNFECL/DGj4/gQiZaRtd9XXFhsXtxuxIiyauRlOf2YisFElCKWuBadOnaI0d+W0gkgvfSXCkDTZEtOvkm1frJWixPLW69Cxph85bFK53oBwlFenUceTTxT7jNuwsshv5lwyk/NhLSqCJknYn+X1F9LQn/PfAGOYzAVoeXRgOzTUASprOLs9O6Op0w2jmobsJOZIM8K8OO/tkVBEMfa0zzhjRu9My5KpZkJRbChkiUCOFGB0YgK/21+SUqZcWgOrQWCet9kxuTX7Ra4p1LzOTi44ICm5XgAxOb87kGqm0nZHs5TaQu6/gvrknfSvoMJw0NlkVKl8jRzp+IP0efXvCy/Mx9BPzV+LD4kD+9Z6Nsh5YnvQK+ZNgm4xiQPhxbgmE=
