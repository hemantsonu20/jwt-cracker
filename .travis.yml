language: java
jdk:
- openjdk8
branches:
  except:
  - "/master-v0\\.1.*/"
install: true
before_script:
- chmod +x ./travis.sh
script:
- "./travis.sh"
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- export GIT_TAG=$TRAVIS_BRANCH-v0.1.$TRAVIS_BUILD_NUMBER
- git tag $GIT_TAG -a -m "Generated tag from TravisCI for build $TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker --tags
deploy:
  provider: releases
  api_key: "$GITHUB_TOKEN"
  file: target/jwt-cracker-0.0.1-SNAPSHOT.jar
  skip_cleanup: true
  on:
    tags: false
    branch: master
after_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git checkout $TRAVIS_BRANCH
- git add docs/apidocs/* && git status
- git commit -m "[skip ci] adding javadocs travis build:$TRAVIS_BUILD_NUMBER"
- git push https://$GITHUB_TOKEN@github.com/hemantsonu20/jwt-cracker $TRAVIS_BRANCH
addons:
  sonarcloud:
    organization: hemantsonu20-github
    token:
      secure: "$SONAR_TOKEN"
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
notifications:
  email:
    recipients:
    - hemantsonu20@gmail.com
    on_success: change
    on_failure: always
env:
  global:
  # GITHUB_TOKEN
  - secure: e9X2UrTTVB//0hu+m+RnhFbjd6mRmRf2RNODVsWmj9FbNezybk4jqTL2EINAgbK904RNoj4nGt2z8I9HvpCK/lgY9cdkTF2T1j8yjtAO/gSHSCbRK8y7Ly4rw0J1w98UvtNXh9npn3UONJ6BO4OdtAY6UC3NuIKOOusjANcjbHIaRZ/7xP2togwKgE8zAV4/6XLVGFsnuTNHLP2bYu4yb9lZbdemJ1SHNjJFr4gLHnUnyXzTGtKW4BLvGfczLE5jll+D3hLgIfuVayEYlgOXJmmGlEy4JXMsdi4hMHmPz/icG91dt0Bxd5tbzM/T9RcMN7aDspJMSul4Tg1hmzUJ+yQ0vAvoElSuFoMTYqtrKvl+RQZF4GJ1+vMtIzaQr/NbS/L4SO1putQw0ubSfsesHQ7dkFwOyfmCkI0nDpt8VxWpXi5Xbj0ZhEg9bo+/i7bA3C7VEGh4e4ciSU3HIFA8KP4ku0Gx3qZdLIy0Pi8d3TtLS8udqORd9mPIXqSpjrsmdYhuGl3j4ssxqGZEBWNcz9C1vrSz5HlP5QEACVaJyczow0d9D8IWdj1aAHU39FJ4yfuvPrvUPzlm2BYanobtIQZZvNFlcMsH0zHOXJpiVRhzEaCo+KVf66KRaPMOoExWXYyCPm6oAziswq0nIXZ7vNS9iAx3j8E1Kdd2LFyIEiE=
  # SONAR_TOKEN
  - secure: OchbG8aqkKmz+EfPraC6ARcTX/lvwf6FVJEHo3uBMTib/ER12bSyEZho/55RIqpW8wZ3UcFBBFwwJ1upzz9BmmjVssV+7YP21CADuxp0INyu7MY9MJetlHsn8lX4sjkrebb4eMPL6T/EUR7SevG3gmvKmNivkqR2mD5Y0py+bU19ZjyLye2FJ4i6DNaBu20MqWeM5rKArcneC7geyzwQw/SfqInjyy7h3AxHQgGVkQvNK3IhHIP+S4DX3+pd4bTncOtu9/Gm3YWLdV9ESGc+p1U6GzYCDTQNcCfYOrHRydpXYowVGgQEL0uEF0XlttTkJa9CVME1LVb6fUNkbU83UG7h3nvLioPDElQlpE15I5aACACU1M+QHfUTpIwkwUt7bGdvkC5nW/hFSEyEvKr2QUUgibC1fWJqNK8aby2zOclTpSoTBQyKXnBmCTk2EwJiFM76Cq+qjBKklhtyfPLFGCHBIlkffvLrhLt3IDB3NDS4kCRWAxXaA8ZxMrL/zETA1NLOXkYJAk3pb9P0orOCI1H+LmaZWRbIj+3fsTV0OmEvHyClygrkcSzQD8VHWKTBfWjUrhst2EfAM5ZYK4TmATfit33pTQ2gYrWDweLTPG0ew2xYrTH1Ljfy3+oecRYWyRN9XrGUuQyVauWarD2XR4pEzsLjwQ9Ux8Tv57JyzDE=
